# Advanced Custom Slider

WordPressのローディング画面完了後に開始するプロフェッショナルなカスタムスライダーシステムです。

## 🎯 主要機能

- ✅ **ローディング画面完了後の遅延開始** - サイトの読み込み完了を自動検知してスライダーを開始
- ✅ **完全な管理画面システム** - WordPressダッシュボードから直感的に操作
- ✅ **豊富なコンテンツ対応** - 画像・タイトル・サブタイトル・リンクURL
- ✅ **WordPressメディアライブラリ連携** - 既存の画像を簡単に選択
- ✅ **ドラッグ&ドロップ順序変更** - 直感的なスライド並び替え
- ✅ **スライダー複製機能** - 既存スライダーを簡単にコピー
- ✅ **フェード・スライド切り替え効果** - プロフェッショナルなアニメーション
- ✅ **完全レスポンシブ対応** - デスクトップ・タブレット・モバイル
- ✅ **ショートコードで簡単表示** - どのページでも簡単に設置

## 🚀 インストール・アクティベート

### ステップ1: プラグインのインストール
1. プラグインファイルを `/wp-content/plugins/custom-slider/` ディレクトリにアップロード
2. WordPress管理画面の「プラグイン」ページで「Advanced Custom Slider」を有効化
3. 管理画面に「カスタムスライダー」メニューが追加されます

### ステップ2: 自動データ移行
プラグインを有効化すると、既存の「Yokitabi スライダー」データが自動的に新システムに移行されます。

## 📋 基本的な使用方法

### 1. 新規スライダーの作成

1. WordPress管理画面で「**カスタムスライダー**」をクリック
2. 「**新規スライダー作成**」セクションで以下を設定：
   - **スライダー名**: 管理用の識別名（例：「メインスライダー」）
   - **説明**: 用途の説明（例：「トップページ用」）
   - **自動再生間隔**: スライド切り替えまでの時間（ミリ秒）
   - **切り替え効果**: フェードまたはスライド
   - **切り替え速度**: アニメーション速度（ミリ秒）
   - **高さ**: スライダーの高さ（例：`100vh`, `600px`）
   - **表示オプション**: ナビゲーション・ページネーション・遅延開始
   - **開始遅延時間**: ローディング完了後の待機時間（秒）

3. 「**スライダーを作成**」ボタンをクリック

### 2. スライドの追加・編集

1. 作成されたスライダーの「**編集**」ボタンをクリック
2. 「**新しいスライドを追加**」セクションで以下を入力：
   - **画像URL**: 「画像を選択」ボタンでメディアライブラリから選択
   - **メインテキスト**: 大きく表示されるタイトル
   - **サブテキスト**: 小さく表示されるサブタイトル
   - **リンクURL**: クリック時の遷移先（オプション）

3. 「**スライドを追加**」ボタンをクリック

### 3. スライドの並び替え

- スライド一覧でドラッグ&ドロップアイコン（⋮⋮）をドラッグして順序を変更
- 変更は自動的に保存されます

### 4. スライダーの複製

1. スライダー一覧で「**複製**」ボタンをクリック
2. 新しいスライダーが「(複製)」付きの名前で作成されます
3. 必要に応じて名前や設定を変更

### 5. ページ・投稿での表示

作成したスライダーを表示するには、以下のショートコードを使用：

```
[custom_slider id="1"]
```

*（1の部分は実際のスライダーIDに変更してください）*

## 🎨 カスタマイズ

### 基本設定オプション

| 設定項目 | 説明 | デフォルト値 | 設定例 |
|---------|------|------------|-------|
| **自動再生間隔** | スライド切り替え間隔（ミリ秒） | 5000 | 3000（3秒） |
| **切り替え効果** | fade（フェード）またはslide（スライド） | fade | slide |
| **切り替え速度** | アニメーション速度（ミリ秒） | 1000 | 500（高速） |
| **高さ** | スライダーの高さ | 100vh | 600px |
| **ナビゲーションボタン** | 前後ボタンの表示 | 有効 | 無効も可能 |
| **ページネーション** | ドットページネーションの表示 | 有効 | 無効も可能 |
| **ローディング完了後に開始** | 遅延開始の有効化 | 有効 | 無効も可能 |
| **開始遅延時間** | 遅延時間（秒） | 1.0 | 2.0（2秒待機） |

### スライド設定項目

| 設定項目 | 説明 | 必須 | 備考 |
|---------|------|------|------|
| **画像URL** | スライド背景画像のURL | ✅ | メディアライブラリから選択推奨 |
| **メインテキスト** | 大きく表示されるタイトル | ❌ | HTML使用不可 |
| **サブテキスト** | 小さく表示されるサブタイトル | ❌ | HTML使用不可 |
| **リンクURL** | クリック時の遷移先URL | ❌ | 新しいタブで開きます |

## 🎯 レガシーモード（後方互換性）

既存のサイトでパラメータ指定方式のショートコードを使用している場合、引き続き使用可能です：

```php
[custom_slider 
  images="https://example.com/img1.jpg,https://example.com/img2.jpg"
  facility_names="施設1,施設2"
  en_names="Facility 1,Facility 2"
  autoplay="5000"
  effect="fade"
  speed="1000"
  height="100vh"
  show_navigation="true"
  show_pagination="true"
  delay_start="true"
  delay_seconds="1.0"
]
```

**注意**: 新規作成の場合は、管理画面からの作成を強く推奨します。

## 🎨 CSSカスタマイズ

### よく使用されるカスタマイズ例

#### タイトルテキストのスタイル変更
```css
.facility-title {
    font-size: 3rem !important;
    color: #ff6347;
    text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.7);
    font-weight: 900;
}

.facility-subtitle {
    font-size: 1.2rem !important;
    color: #ffffff;
    opacity: 0.9;
}
```

#### オーバーレイの透明度調整
```css
.slide-overlay {
    background: rgba(0, 0, 0, 0.3); /* 30%の黒オーバーレイ */
}
```

#### ナビゲーションボタンのカスタマイズ
```css
.custom-slider .swiper-button-next,
.custom-slider .swiper-button-prev {
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    border-radius: 50%;
    width: 50px;
    height: 50px;
}
```

#### ページネーションのカスタマイズ
```css
.custom-slider .swiper-pagination-bullet {
    background: rgba(255, 255, 255, 0.7);
    width: 12px;
    height: 12px;
}

.custom-slider .swiper-pagination-bullet-active {
    background: #ff6347;
}
```

#### レスポンシブ対応の調整
```css
@media (max-width: 768px) {
    .facility-title {
        font-size: 2rem !important;
    }
    
    .slide-content {
        padding: 15px;
        text-align: center;
    }
}
```

## ⚡ JavaScript拡張

### カスタムイベント

#### スライダー初期化後の処理
```javascript
document.addEventListener('DOMContentLoaded', function() {
    const sliders = document.querySelectorAll('.custom-slider');
    sliders.forEach(function(slider) {
        if (slider.swiper) {
            // スライド変更時のカスタム処理
            slider.swiper.on('slideChange', function() {
                console.log('スライドが変更されました: ', this.activeIndex);
            });
            
            // スライダーがタッチされた時の処理
            slider.swiper.on('touchStart', function() {
                console.log('スライダーがタッチされました');
            });
        }
    });
});
```

#### 動的スライダーの初期化
```javascript
// カスタムイベントでスライダーを初期化
$(document).trigger('custom-slider-init', [sliderElement]);
```

### 利用可能なSwiper.jsオプション

プラグインはSwiper.js v10を使用しています。追加のオプションが必要な場合は、JavaScript でカスタマイズできます：

```javascript
// 高度なカスタマイズ例
document.addEventListener('DOMContentLoaded', function() {
    $('.custom-slider').each(function() {
        if (this.swiper) {
            // キーボード操作を有効化
            this.swiper.keyboard.enable();
            
            // マウスホイールでのスクロールを有効化
            this.swiper.mousewheel.enable();
        }
    });
});
```

## 🔧 トラブルシューティング

### よくある問題と解決方法

#### 1. スライダーが表示されない
**症状**: ページにスライダーが表示されない

**解決方法**:
1. ブラウザの開発者ツール（F12）でエラーを確認
2. ショートコードのIDが正しいかチェック
3. スライダーが「有効」状態かチェック
4. スライドが1枚以上追加されているかチェック

#### 2. 画像が表示されない
**症状**: スライダーは表示されるが画像が出ない

**解決方法**:
1. 画像URLが正しいかチェック
2. 画像ファイルがサーバーに存在するかチェック
3. 画像のファイル権限を確認（644推奨）
4. メディアライブラリから再度選択

#### 3. ローディング完了検知が動作しない
**症状**: ページ読み込み後すぐにスライダーが開始される

**解決方法**:
1. サイトのローディング要素のクラス名を確認
2. 遅延時間を長めに設定（3〜5秒）
3. 「ローディング完了後に開始」を無効化して確認

#### 4. 管理画面でメディアライブラリが開かない
**症状**: 「画像を選択」ボタンが反応しない

**解決方法**:
1. 他のプラグインとの競合をチェック
2. WordPressとプラグインを最新版に更新
3. ブラウザのキャッシュをクリア
4. JavaScript エラーがないか確認

#### 5. スライドの順序変更ができない
**症状**: ドラッグ&ドロップが効かない

**解決方法**:
1. ページを再読み込み
2. 他のプラグインを一時的に無効化して確認
3. jQuery UI Sortableの競合をチェック

### パフォーマンス最適化

#### 画像最適化
- **推奨サイズ**: 1920×1080px（フルHD）
- **ファイル形式**: JPEG（写真）、PNG（ロゴ・イラスト）、WebP（対応ブラウザ）
- **ファイルサイズ**: 500KB以下推奨

#### 読み込み速度向上
```css
/* 画像の遅延読み込み */
.slide-background {
    background-attachment: scroll; /* fixed を避ける */
    will-change: transform; /* GPU加速 */
}
```

## 🔄 アップデート・移行

### 旧バージョンからの移行

1. **自動移行**: プラグイン有効化時に旧データが自動移行されます
2. **ショートコード**: 旧ショートコード `[yokitabi_slider]` も継続して使用可能
3. **設定保持**: 全ての設定・スライド・順序が保持されます

### データベーステーブル

プラグインは以下のテーブルを使用します：
- `wp_custom_sliders` - スライダー情報
- `wp_custom_slides` - スライド情報

## 🆘 サポート

### 技術仕様
- **WordPress**: 5.0以上
- **PHP**: 7.4以上推奨
- **MySQL**: 5.6以上
- **ブラウザ**: Chrome, Firefox, Safari, Edge（最新2バージョン）

### 開発者向け情報
- **Swiper.js**: v10.0.0
- **jQuery**: WordPress同梱版
- **jQuery UI**: Sortable使用

---

**Plugin Version**: 1.1.0  
**Last Updated**: 2025年8月  
**License**: GPL v2 or later  

このプラグインは完全にオープンソースで、自由にカスタマイズ・再配布が可能です。